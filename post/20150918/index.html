<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:400,700" rel="stylesheet" type="text/css">
<link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/github.min.css">
<link rel="stylesheet" href="/DevelopersBacking/css/normalize.css">
<link rel="stylesheet" href="/DevelopersBacking/css/skeleton.css">
<link rel="stylesheet" href="/DevelopersBacking/css/custom.css">
<link rel="alternate" href="/DevelopersBacking/index.xml" type="application/rss+xml" title="Netcom Developer&#39;s Backing">
<title>Netcom Developer&#39;s Backing #6のまとめ - Netcom Developer&#39;s Backing</title>
</head>
<body>

<div class="container">

	<header role="banner">
		<div class="header-logo">
			<a href="/DevelopersBacking/"><img src="/DevelopersBacking/images/logo.png" width="60" height="60"></a>
		</div>
		
	</header>


	<main role="main">
		<article itemscope itemtype="http://schema.org/BlogPosting">
			<h1 class="entry-title" itemprop="headline">Netcom Developer&#39;s Backing #6のまとめ</h1>
			<span class="entry-meta"><time itemprop="datePublished" datetime="2015-09-18">September 18, 2015</time></span>
			<section itemprop="entry-text">
				

<p>9/18（金）にNetcom Developer&rsquo;s Backing #6を行いました。</p>

<h1 id="ios9の新機能について:dc23a03c468a971622ed612b653b3171">iOS9の新機能について</h1>

<h2 id="search-apisについて:dc23a03c468a971622ed612b653b3171">Search APIsについて</h2>

<p>以下の3つの要素で構成されている。</p>

<ul>
<li>NSUserActivity</li>
<li>CoreSpotlight</li>
<li>Web Markup</li>
</ul>

<h3 id="ios側での対応:dc23a03c468a971622ed612b653b3171">iOS側での対応</h3>

<h4 id="nsuseractivity-ユーザ端末内-他の端末にも:dc23a03c468a971622ed612b653b3171">NSUserActivity（ユーザ端末内/他の端末にも）</h4>

<ul>
<li>ユーザーがアプリ内で閲覧したコンテンツ（のみ）をindexして、SpotlightやSafariの検索バーから検索することができるようにする機能</li>

<li><p>デバイス内だけでなく、アプリをインストールしていないユーザーのSpotlightやSafariの検索バーにも、コンテンツを表示することができる</p></li>

<li><p>実装</p>

<pre><code class="language-ruby">// NSUserActivity
var activity:NSUserActivity = NSUserActivity(activityType: “com.yummly.browseRecipe“)


activity.title = &quot;Baked Potato Chips&quot;
activity.keywords = Set&lt;String&gt;(arrayLiteral: &quot;dog&quot;, &quot;cat&quot;, &quot;pig&quot;, &quot;sheep&quot;)
activity.userInfo =  [&quot;id&quot;: &quot;http://www.yummly.com/recipe/BPC-983195&quot;]
activity.eligibleForSearch = true
activity.becomeCurrent()
</code></pre></li>

<li><p>Spotlightでタップ<br />
appDelegateでapplication:continueUserActivity:restorationHandler:メソッドが呼ばれる<br />
-&gt; このとき、何をするか、
-&gt; WWDC2015のスライドには
// Restore state for userActivity and userInfo
とある。（まだよくわかってない）</p></li>

<li><p>Cloud Indexへの登録
eligibleForPublicIndexingをYESにする<br />
-&gt; キーワードに対して人気が高いアプリと認識されると、アプリをインストールしていないユーザにも検索結果を表示できる
<img src="img/20150618190808.png" alt="wwdc" /></p></li>
</ul>

<h4 id="corespotlight-ユーザ端末内のみ:dc23a03c468a971622ed612b653b3171">CoreSpotlight（ユーザ端末内のみ）</h4>

<ul>
<li>Spotlightに表示させるコンテンツを追加、更新する機能</li>
<li>ユーザーの閲覧したコンテンツだけでなく、アプリ内の任意のコンテンツを検索させることができる</li>

<li><p>NSUserActivityとの違いがよく分からない<br />
-&gt; WWDCのスライドでは
   CSSearchableIndexを add, update, and deleteできる
   Used by Messages, Mail, Calendar, and Notes<br />
   ということだが、、、
-&gt; もう少し調べてみる
  <a href="https://www.hackingwithswift.com/read/32/4/how-to-add-core-spotlight-to-index-your-app-content">https://www.hackingwithswift.com/read/32/4/how-to-add-core-spotlight-to-index-your-app-content</a></p>

<p><img src="img/20150618190711-1.png" alt="wwdc" /></p></li>

<li><p>実装</p></li>
</ul>

<pre><code class="language-ruby">  // Core Spotlight
  let attributeSet = CSSearchableItemAttributeSet(itemContentType: kUTTypeImage as String)
  attributeSet.title = &quot;iOS-9-Sampler_CoreSpotlight&quot;
  attributeSet.contentDescription = &quot;iOS-9-Sampler is a code example collection for new features of iOS 9.&quot;
  attributeSet.keywords = [&quot;dog&quot;, &quot;cat&quot;, &quot;bird&quot;, &quot;fish&quot;]
  let image = UIImage(named: &quot;m7&quot;)!
  let data = UIImagePNGRepresentation(image)
  attributeSet.thumbnailData = data

  let searchableItem = CSSearchableItem(
      uniqueIdentifier: uniqueIdentifier,
      domainIdentifier: domainIdentifier,
      attributeSet: attributeSet)

  CSSearchableIndex.defaultSearchableIndex().indexSearchableItems([searchableItem]) { (error) -&gt; Void in
      if error != nil {
          print(&quot;failed with error:\(error)\n&quot;)
      }
      else {
          print(&quot;Indexed!\n&quot;)
      }
  }
</code></pre>

<h3 id="webページ側での対応:dc23a03c468a971622ed612b653b3171">Webページ側での対応</h3>

<h4 id="web-markup:dc23a03c468a971622ed612b653b3171">Web Markup</h4>

<ul>
<li>Universal Linkやメタ情報をAppleのクロールがインデックスできる仕様で記載する</li>
<li>Smart App Banners</li>

<li><p>Open Graph または schema.org で定義されているフォーマットで詳細情報を追加する</p></li>

<li><p>チェックツール
<a href="https://search.developer.apple.com/appsearch-validation-tool/">https://search.developer.apple.com/appsearch-validation-tool/</a></p></li>
</ul>

<h3 id="具体的な実装はこちらの記事を参考にすると良さそうです-あと-ios-9-sampler:dc23a03c468a971622ed612b653b3171">具体的な実装はこちらの記事を参考にすると良さそうです。あと、iOS-9-Sampler。</h3>

<p><a href="http://nsblogger.hatenablog.com/entry/2015/06/18/ios9_core_spotlight">http://nsblogger.hatenablog.com/entry/2015/06/18/ios9_core_spotlight</a>
<a href="http://ameblo.jp/ca-1pixel/entry-12047222782.html">http://ameblo.jp/ca-1pixel/entry-12047222782.html</a></p>

<h2 id="他に気になるのは:dc23a03c468a971622ed612b653b3171">他に気になるのは</h2>

<h3 id="multitasking-enhancements-for-ipad:dc23a03c468a971622ed612b653b3171">Multitasking Enhancements for iPad</h3>

<p>-&gt; まだ調べてない</p>

<h3 id="3d-touch:dc23a03c468a971622ed612b653b3171">3D Touch</h3>

<p>-&gt; これは先日のPotatotips#21で発表してた人がいた（まだシュミレーターで試せないそう、、、）</p>

<h3 id="watch-connectivity:dc23a03c468a971622ed612b653b3171">Watch Connectivity</h3>

<p>-&gt;　これは、今サンプルアプリを作成中（証券会社のお気に入り銘柄を表示するアプリ）</p>

<h2 id="恒例のios-9-sampler:dc23a03c468a971622ed612b653b3171">恒例のiOS-9-Sampler</h2>

<p><a href="https://github.com/shu223/iOS-9-Sampler">https://github.com/shu223/iOS-9-Sampler</a>
* Text Detector
* UIStackView</p>

<hr />

<p>次回は2週間後の 10/2（金）に開催予定です。</p>

<p>（高井）</p>

			</section>
		</article>
	</main>


	<footer role="contentinfo">
		<div class="hr"></div>
		<div class="footer-link">
			<a href="mailto:takaiashota@gmail.com" target="_blank">Email</a></span>
			
			<a href="https://www.facebook.com/shota.takai.9" target="_blank">Facebook</a></span>
			<a href="https://github.com/takaishota" target="_blank">GitHub</a></span>
		</div>
		<div class="copyright">Copyright &copy; takaishota All rights reserved.</div>
	</footer>

</div>



<script src="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

</body>
</html>
